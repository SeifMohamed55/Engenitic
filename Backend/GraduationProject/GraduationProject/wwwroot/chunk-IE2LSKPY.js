import{a as P}from"./chunk-AY56BS4D.js";import{a as N,b as _,c as j,d as G,e as O,f as q,h as k,j as z,m as $,t as A}from"./chunk-W3D5FJDG.js";import{l as M}from"./chunk-T3YITE6W.js";import{h as T,j as D,r as I}from"./chunk-3CPSLGPY.js";import{$b as E,Ab as a,Bb as y,Eb as C,Ib as h,Jb as u,R as x,Sb as S,Tb as p,Ub as w,Vb as V,Xa as r,bb as v,gb as F,ha as f,ia as g,j as b,lb as d,sb as m,zb as o}from"./chunk-YOS4OKYA.js";var H=()=>({isDisabled:"text-gray-500"});function L(i,n){if(i&1&&(o(0,"div")(1,"p",11),p(2),a()()),i&2){let e=u();r(2),V(" ",e.fileValidationError," ")}}function R(i,n){i&1&&(o(0,"p",11),p(1," the image field is required "),a())}function U(i,n){if(i&1&&(o(0,"div"),d(1,R,2,0,"p",12),a()),i&2){let e,t=u();r(),m("ngIf",(e=t.vqaForm.get("image"))==null?null:e.getError("required"))}}function J(i,n){i&1&&(o(0,"p",11),p(1," the question field is required "),a())}function K(i,n){if(i&1&&(o(0,"div"),d(1,J,2,0,"p",12),a()),i&2){let e,t=u();r(),m("ngIf",(e=t.vqaForm.get("question"))==null?null:e.getError("required"))}}var B=class i{constructor(n,e){this._ModelsService=n;this._ToastrService=e}destroy$=new b;ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}vqaForm=new O({image:new q("",[_.required]),question:new q("",[_.required])});isDisabled=!1;response="";selectedFile=null;fileValidationError=null;onFileChange(n){let e=n.target;if(this.fileValidationError=null,e.files&&e.files.length>0){let t=e.files[0];this.selectedFile=t;let l=["image/jpg","image/png","image/jpeg"],s=2*1024*1024;if(!l.includes(this.selectedFile.type)){this.selectedFile=null,this.fileValidationError="invalid image type";return}if(this.selectedFile.size>s){this.fileValidationError="image size must be less than 2MB",this.selectedFile=null;return}}else this.selectedFile=null}handleSubmit(){if(this.isDisabled=!0,this.vqaForm.valid){let n=new FormData;this.selectedFile&&n.append("image",this.selectedFile),n.append("question",this.vqaForm.get("question")?.value),this._ModelsService.VqaModel(n).pipe(x(this.destroy$)).subscribe({next:e=>{this.response=e.data.answer},error:e=>{e.error.message?this._ToastrService.error(e.error.message):this._ToastrService.error("something wrong with the server try again later !")}})}else this.vqaForm.markAllAsTouched();this.isDisabled=!1}static \u0275fac=function(e){return new(e||i)(v(P),v(M))};static \u0275cmp=F({type:i,selectors:[["app-vqa"]],decls:15,vars:8,consts:[["question",""],[1,"container"],[3,"ngSubmit","formGroup"],[1,"grid","md:grid-cols-2","items-center","mt-10","gap-10","md:gap-20"],[1,"flex","justify-between","items-start","flex-col","gap-5"],["title","image loader","type","file","accept","image/*","formControlName","image",1,"custom-file-input","font-display","lowercase","w-full",3,"change"],[4,"ngIf"],["type","text","placeholder","  type your question here ...","formControlName","question",1,"engenitic-input"],["type","submit",1,"engenitic-button","hover:enginitic-main-color","hover:text-white","w-full","md:w-fit","md:mx-auto",3,"disabled","ngClass"],[1,"ms-auto"],["disabled","","rows","12","cols","65","placeholder","    your answer will be here .",1,"engenitic-input","w-full"],[1,"text-normal","font-regular","text-red-500"],["class","text-normal font-regular text-red-500",4,"ngIf"]],template:function(e,t){if(e&1){let l=C();o(0,"main",1)(1,"form",2),h("ngSubmit",function(){return f(l),g(t.handleSubmit())}),o(2,"div",3)(3,"div",4)(4,"input",5),h("change",function(c){return f(l),g(t.onFileChange(c))}),a(),d(5,L,3,1,"div",6)(6,U,2,1,"div",6),y(7,"input",7,0),d(9,K,2,1,"div",6),o(10,"button",8),p(11," submit "),a()(),o(12,"div",9)(13,"textarea",10),p(14),a()()()()()}if(e&2){let l,s,c=S(8);r(),m("formGroup",t.vqaForm),r(4),m("ngIf",t.fileValidationError),r(),m("ngIf",((l=t.vqaForm.get("question"))==null?null:l.errors)&&((l=t.vqaForm.get("question"))==null?null:l.touched)),r(3),m("ngIf",((s=t.vqaForm.get("question"))==null?null:s.errors)&&(((s=t.vqaForm.get("question"))==null?null:s.touched)||c.value.length>0)),r(),m("disabled",t.isDisabled)("ngClass",E(7,H)),r(4),w(t.response)}},dependencies:[A,k,N,j,G,z,$,I,T,D],styles:[".custom-file-input[_ngcontent-%COMP%]{border:none;border-radius:5px;font-size:14px;cursor:pointer;color:#555}.custom-file-input[_ngcontent-%COMP%]::-webkit-file-upload-button{background-color:#000;color:#fff;border:1px solid white;padding:8px 12px;margin-right:10px;border-radius:5px;cursor:pointer}"]})};export{B as VqaComponent};
