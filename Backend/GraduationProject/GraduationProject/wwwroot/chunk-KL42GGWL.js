import{a as C}from"./chunk-DAENC3M5.js";import{l as y}from"./chunk-T3YITE6W.js";import{a as b,c as S}from"./chunk-CGPJEUNO.js";import"./chunk-3CPSLGPY.js";import{Ab as f,C as u,Q as m,R as o,Tb as g,Vb as h,Xa as d,bb as i,gb as v,j as c,o as a,z as p,zb as l}from"./chunk-YOS4OKYA.js";var R=class n{constructor(e,t,r,s){this._ActivatedRoute=e;this._CoursesService=t;this._ToastrService=r;this._Router=s}counter=5;subscription;userId;newEmail;token;destroy$=new c;ngOnInit(){this._ActivatedRoute.queryParamMap.pipe(o(this.destroy$),m(e=>{let t=Number(e.get("userId")),r=String(e.get("newEmail")),s=String(e.get("token"));return this._CoursesService.confirmEmailChange(t,r,s).pipe(u(I=>a(()=>I)))})).subscribe({next:e=>{this._ToastrService.success("Email Changed Successfully !"),this._Router.navigate(["/home"])},error:e=>{this._ToastrService.error(e.error.message||"an error has occured, try again later")}}),this.subscription=p(1e3).pipe(o(this.destroy$)).subscribe(()=>{this.counter!==0&&(this.counter-=1)})}ngOnDestroy(){this.subscription.unsubscribe(),this.destroy$.next(),this.destroy$.complete()}static \u0275fac=function(t){return new(t||n)(i(b),i(C),i(y),i(S))};static \u0275cmp=v({type:n,selectors:[["app-redirection-page"]],decls:3,vars:1,consts:[[1,"flex","justify-center","items-center","font-display","text-[40px]"]],template:function(t,r){t&1&&(l(0,"div",0)(1,"h1"),g(2),f()()),t&2&&(d(2),h("you will be redirected in ",r.counter,""))},encapsulation:2})};export{R as RedirectionPageComponent};
