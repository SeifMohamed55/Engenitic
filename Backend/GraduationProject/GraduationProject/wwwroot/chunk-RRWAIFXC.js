import{a as N,b as $,c as A}from"./chunk-A66F6OJO.js";import{a as D}from"./chunk-DAENC3M5.js";import{l as O}from"./chunk-T3YITE6W.js";import{a as T,c as F,d as j,g as L}from"./chunk-CGPJEUNO.js";import{i as M,r as E}from"./chunk-3CPSLGPY.js";import{Ab as n,Bb as l,Eb as I,Ib as g,Jb as v,R as m,Sa as b,Tb as c,Vb as x,Xa as s,ac as S,bb as u,bc as P,cc as w,fc as R,gb as y,ha as h,hc as k,ia as C,j as f,lb as _,sb as a,zb as r}from"./chunk-YOS4OKYA.js";var U=(o,t,e)=>({itemsPerPage:o,currentPage:t,totalItems:e}),V=o=>["/courses/adding",o],B=(o,t)=>["/courses/editing",o,t];function q(o,t){if(o&1){let e=I();r(0,"div",9),l(1,"img",10),r(2,"h3",11),c(3),n(),r(4,"div",12)(5,"a",13)(6,"span",6),c(7," Edit "),n(),r(8,"span",14),l(9,"i",15),n()(),r(10,"button",16),g("click",function(){let d=h(e).$implicit,p=v();return C(p.deleteCourse(d.id,p.userId))}),r(11,"span",6),c(12," Delete "),n(),r(13,"span",14),l(14,"i",17),n()()()()}if(o&2){let e=t.$implicit,i=v();s(),a("src",e.image.imageURL||"",b)("alt",e.image.name),s(2),x(" ",e.title," "),s(2),a("routerLink",P(4,B,i.userId,e.id))}}var z=class o{constructor(t,e,i,d){this._ActivatedRoute=t;this._CoursesService=e;this._ToastrService=i;this._Router=d}destroy$=new f;userId=0;itemsPerPage=10;currentPage=0;totalItems=0;instructorCourses=[];onPageChange(t){this.currentPage=t,this._Router.navigate(["/profile/instructor",this.userId,this.currentPage]),this.fetchCollection(this.currentPage)}ngOnInit(){this._ActivatedRoute.paramMap.pipe(m(this.destroy$)).subscribe(t=>{this.userId=Number(t.get("userId"))||0,this.currentPage=Number(t.get("collectionId"))||1,this.fetchCollection(this.currentPage)})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}fetchCollection(t){this._CoursesService.getCreatedCourses(t,this.userId).subscribe({next:e=>{this.totalItems=e.data.totalItems,this.instructorCourses=e.data.paginatedList},error:e=>{this._ToastrService.error(e.error.message||"Failed to fetch courses. Please try again.")}})}deleteCourse(t,e){this._CoursesService.deleteCourse(t,e).pipe(m(this.destroy$)).subscribe({next:i=>{this._ToastrService.success(i.message),this.fetchCollection(1),this._Router.navigate(["/profile/instructor",this.userId,1])},error:i=>{this._ToastrService.error("Failed to delete course.")}})}static \u0275fac=function(e){return new(e||o)(u(T),u(D),u(O),u(F))};static \u0275cmp=y({type:o,selectors:[["app-instructor-made-courses"]],decls:13,vars:13,consts:[[1,"py-10"],[1,"py-4","text-header","font-display","text-center"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","gap-10","py-3"],["class","flex flex-col justify-between items-center course shadow-container rounded-lg p-4",4,"ngFor","ngForOf"],["previousLabel","Previous","nextLabel","Next",3,"pageChange","responsive","maxSize"],[1,"w-full","engenitic-button","hover:engenitic-success","text-center","cursor-pointer","mt-8","relative","group","inline-block",3,"routerLink"],[1,"transition-opacity","duration-300","opacity-100","group-hover:opacity-0"],[1,"absolute","inset-0","top-2","transition-opacity","duration-300","opacity-0","group-hover:opacity-100","text-white"],[1,"fa-solid","fa-plus"],[1,"flex","flex-col","justify-between","items-center","course","shadow-container","rounded-lg","p-4"],["title","Course Image",1,"w-full","h-48","object-contain","rounded-lg",3,"src","alt"],[1,"py-4","font-display","text-lg","text-center"],[1,"flex","justify-evenly","w-full"],[1,"engenitic-button","w-fit","course-button","text-center","translate-y-20","hover:bg-yellow-400","relative","group","inline-block",3,"routerLink"],[1,"absolute","inset-0","top-2","transition-opacity","duration-300","opacity-0","group-hover:opacity-100"],[1,"fa-solid","fa-gear","fa-bounce"],[1,"engenitic-button","danger-button","w-fit","hover:engenitic-danger","text-center","relative","group","inline-block","cursor-pointer","translate-y-20","course-button",3,"click"],[1,"fa-solid","fa-trash","fa-shake"]],template:function(e,i){e&1&&(r(0,"div",0)(1,"h2",1),c(2,"Created Courses"),n(),r(3,"div",0)(4,"div",2),_(5,q,15,7,"div",3),R(6,"paginate"),n(),r(7,"pagination-controls",4),g("pageChange",function(p){return i.onPageChange(p)}),n()(),r(8,"a",5)(9,"span",6),c(10," Add Course "),n(),r(11,"span",7),l(12,"i",8),n()()()),e&2&&(s(5),a("ngForOf",k(6,4,i.instructorCourses,w(7,U,i.itemsPerPage,i.currentPage,i.totalItems))),s(2),a("responsive",!0)("maxSize",10),s(),a("routerLink",S(11,V,i.userId)))},dependencies:[A,N,$,E,M,L,j],encapsulation:2})};export{z as InstructorMadeCoursesComponent};
