import{a as T}from"./chunk-KCRSIWVY.js";import{a as E,b as f,c as N,d as D,e as O,f as _,h as M,j as V,m as k,t as R}from"./chunk-W3D5FJDG.js";import{l as A}from"./chunk-T3YITE6W.js";import{a as I}from"./chunk-CGPJEUNO.js";import{j as P,r as F}from"./chunk-3CPSLGPY.js";import{Ab as p,Bb as l,Eb as x,Ib as S,Jb as w,R as g,Sb as v,Tb as o,Xa as n,bb as u,gb as y,ha as C,ia as b,j as h,lb as c,sb as a,zb as m}from"./chunk-YOS4OKYA.js";function j(r,e){r&1&&(m(0,"p",9),o(1," password field is required "),p())}function q(r,e){r&1&&(m(0,"p",9),o(1," Password must contain at least: "),l(2,"br"),o(3,"- One digit (0-9) "),l(4,"br"),o(5,"- One lowercase letter (a-z) "),l(6,"br"),o(7,"- One uppercase letter (A-Z) "),l(8,"br"),o(9,"- One special character "),l(10,"br"),o(11,"- Minimum 6 characters "),p())}function z(r,e){if(r&1&&(m(0,"div"),c(1,j,2,0,"p",8)(2,q,12,0,"p",8),p()),r&2){let i,t,s=w();n(),a("ngIf",(i=s.registerForm.get("password"))==null?null:i.getError("required")),n(),a("ngIf",(t=s.registerForm.get("password"))==null?null:t.getError("pattern"))}}function Z(r,e){r&1&&(m(0,"p",9),o(1," passwords don't match ! "),p())}function B(r,e){if(r&1&&(m(0,"div"),c(1,Z,2,0,"p",8),p()),r&2){let i,t=w();n(),a("ngIf",(i=t.registerForm.get("repassword"))==null?null:i.getError("passwordMiss"))}}var G=class r{constructor(e,i,t){this._ActivatedRoute=e;this._UserService=i;this._ToastrService=t}destroy$=new h;buttonDisabled=!1;registerForm=new O({password:new _("",[f.required,f.pattern(/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[^a-zA-Z\d]).{6,}$/)]),repassword:new _("",[f.required])},{validators:[this.confirmPassword]});email="";token="";ngOnInit(){this._ActivatedRoute.queryParamMap.pipe(g(this.destroy$)).subscribe({next:e=>{this.email=e.get("email"),this.token=e.get("token")},error:e=>{this._ToastrService.error(e.error.message||"something went wrong try again later")}})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}confirmPassword(e){let i=e.get("password")?.value,t=e.get("repassword")?.value;return i!==t?e.get("repassword")?.setErrors({passwordMiss:!0}):e.get("repassword")?.setErrors(null),null}handleNewPassword(){this.registerForm.valid?this._UserService.ResetPassword({email:this.email,token:this.token,newPassword:this.registerForm.get("password")?.value,confirmPassword:this.registerForm.get("repassword")?.value}).pipe(g(this.destroy$)).subscribe({next:e=>{this._ToastrService.success(e.message||"password is reseted successfully")},error:e=>{this._ToastrService.error(e.error.message||"an error has occured")}}):this.registerForm.markAllAsTouched()}static \u0275fac=function(i){return new(i||r)(u(I),u(T),u(A))};static \u0275cmp=y({type:r,selectors:[["app-confirm-password"]],decls:10,vars:4,consts:[["password",""],["repassword",""],[1,"grid","grid-cols-1","gap-10","items-center","lg:items-start","w-full","container","pt-7"],[1,"flex","justify-between","items-start","flex-col","h-full",3,"ngSubmit","formGroup"],["type","password","placeholder","  Password ...","formControlName","password",1,"engenitic-input","my-3"],[4,"ngIf"],["type","password","placeholder"," Confirm Password ...","formControlName","repassword",1,"engenitic-input","my-3"],["type","submit",1,"mx-auto","engenitic-button","hover:enginitic-main-color","hover:text-white",3,"disabled"],["class","text-normal font-regular text-red-500",4,"ngIf"],[1,"text-normal","font-regular","text-red-500"]],template:function(i,t){if(i&1){let s=x();m(0,"main",2)(1,"form",3),S("ngSubmit",function(){return C(s),b(t.handleNewPassword())}),l(2,"input",4,0),c(4,z,3,2,"div",5),l(5,"input",6,1),c(7,B,2,1,"div",5),m(8,"button",7),o(9," submit "),p()()()}if(i&2){let s,d,U=v(3),$=v(6);n(),a("formGroup",t.registerForm),n(3),a("ngIf",((s=t.registerForm.get("password"))==null?null:s.errors)&&(((s=t.registerForm.get("password"))==null?null:s.touched)||U.value.length>0)),n(3),a("ngIf",((d=t.registerForm.get("repassword"))==null?null:d.errors)&&(((d=t.registerForm.get("repassword"))==null?null:d.touched)||$.value.length>0)),n(),a("disabled",t.buttonDisabled)}},dependencies:[R,M,E,N,D,V,k,F,P],encapsulation:2})};export{G as ConfirmPasswordComponent};
