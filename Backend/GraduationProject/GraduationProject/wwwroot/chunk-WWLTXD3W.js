import{l as C}from"./chunk-T3YITE6W.js";import{a as R}from"./chunk-DAENC3M5.js";import{a as S,c as y}from"./chunk-CGPJEUNO.js";import"./chunk-3CPSLGPY.js";import{Ab as g,C as m,Q as d,R as o,Tb as h,Vb as b,Xa as l,bb as i,gb as v,j as a,o as p,z as u,zb as f}from"./chunk-YOS4OKYA.js";var I=class n{constructor(e,t,r,s){this._ActivatedRoute=e;this._CoursesService=t;this._ToastrService=r;this._Router=s}counter=5;subscription;userId;newEmail;token;destroy$=new a;ngOnInit(){this._ActivatedRoute.queryParamMap.pipe(o(this.destroy$),d(e=>{let t=Number(e.get("userId")),r=String(e.get("newEmail")),s=String(e.get("token"));return this._CoursesService.confirmEmailChange(t,r,s).pipe(m(c=>(console.error("Email confirmation failed:",c),p(()=>c))))})).subscribe({next:e=>{console.log(e),this._ToastrService.success("Email Changed Successfully !"),this._Router.navigate(["/home"])},error:e=>{console.error("Failed to change email",e)}}),this.subscription=u(1e3).pipe(o(this.destroy$)).subscribe(()=>{this.counter!==0&&(this.counter-=1)})}ngOnDestroy(){this.subscription.unsubscribe(),this.destroy$.next(),this.destroy$.complete()}static \u0275fac=function(t){return new(t||n)(i(S),i(R),i(C),i(y))};static \u0275cmp=v({type:n,selectors:[["app-redirection-page"]],decls:3,vars:1,consts:[[1,"flex","justify-center","items-center","font-display","text-[40px]"]],template:function(t,r){t&1&&(f(0,"div",0)(1,"h1"),h(2),g()()),t&2&&(l(2),b("you will be redirected in ",r.counter,""))},encapsulation:2})};export{I as RedirectionPageComponent};
